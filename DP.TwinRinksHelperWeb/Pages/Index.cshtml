@page
@model IndexModel
<p align="center">
    <img border="0" src="~/images/sharkslogo.gif" width="301" height="156">

</p>
<div align="center"><h2>Youth Hockey Schedule Helper</h2></div>
<form asp-action="Index" method="get">
    <div class="form-actions no-color">
        <div class="container">
            @Html.DropDownListFor(m => m.SelectedTeam, Model.Teams, new { onchange = "this.form.submit();" })

            @if (Model.Events != null)
            {
                <div style="width:200px; margin-top:10px; margin-bottom:10px"><input type="search" class="light-table-filter form-control" data-table="event-table" placeholder="Filter"></div>

                <a href="?handler=exportTeamSnap&team=@HttpContext.Request.Query["SelectedTeam"]"><i class="fas fa-table"></i> TeamSnap File</a> 
                <a href="?handler=iCalFile&team=@HttpContext.Request.Query["SelectedTeam"]"><i class="fas fa-calendar-alt"></i> ICal File</a>

                <table class="table table-hover event-table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Time</th>
                            <th>Event Type</th>
                            <th>Location</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>

                        @foreach (var e in Model.Events)
                        {
                            <tr>
                                <td>@e.EventDate.ToString("ddd, MMM dd yyyy")</td>
                                <td>@DateTime.Today.Add(e.EventStart).ToString("hh:mm tt")</td>
                                @if (e.EventType == TwinRinksScheduleParser.TwinRinksEventType.Game)
                                {

                                <td> <span class="label label-default">@e.EventType</span> vs @e.AwayTeamName</td>

                                }
                                else
                                {

                                    @if (TwinRinksScheduleParser.TwinRinksScheduleParserUtils.IsPowerSkatingEvent(e))
                                    {

                                        <td>
                                            <span class="label label-primary">Power Skating</span> @e.EventType
                                        </td>

                                    }
                                    else
                                    {
                                        <td>@e.EventType</td>

                                    }

                                }

                                @if (e.EventType == TwinRinksScheduleParser.TwinRinksEventType.Game)
                                {
                                    @if (e.Rink == TwinRinksScheduleParser.TwinRinksRink.Away)
                                    {
                                        <td><span class="label label-danger">Away</span> @e.Location </td>
                                    }
                                    else
                                    {

                                        <td><span class="label label-success">Home</span> <font color="@e.Rink"> @e.Rink</font></td>
                                    }
                                }
                                else
                                {
                                    <td><font color="@e.Rink"> @e.Rink</font></td>
                                }
                                @if (e.EventType == TwinRinksScheduleParser.TwinRinksEventType.Practice)
                                {
                                    <td>@e.HomeTeamName @e.AwayTeamName</td>
                                }
                                else
                                {
                                    <td></td>

                                }
                            </tr>
                        }

                    </tbody>
                </table>
            }
        </div>
    </div>
</form>